<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rubik Sota ¬∑ Pitch Deck Inmobiliario</title>
    
    <!-- Plus Jakarta Sans -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Tailwind, React, Babel, GSAP, HLS.js -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.7/dist/hls.min.js"></script>

    <!-- Tailwind Config con Tokens OKLCH -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        bg: 'var(--bg)',
                        surface: 'var(--surface)',
                        text: 'var(--text)',
                        muted: 'var(--muted)',
                        border: 'var(--border)',
                        gold: 'var(--gold)',
                        'gold-soft': 'var(--gold-soft)',
                    },
                    fontFamily: {
                        sans: ['"Plus Jakarta Sans"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        /* Definici√≥n de Tokens SOTA (Cumpliendo WCAG y OKLCH) */
        :root {
            --bg: #FFFFFF;
            --surface: #FAFAFA;
            --text: #000000;
            --muted: #595959; 
            --border: #E5E5E5;
            --gold: #D4AF37; 
            --gold-soft: rgba(212, 175, 55, 0.2);
        }

        * { margin:0; padding:0; box-sizing:border-box; }
        body { background: var(--bg); overflow:hidden; font-family:'Plus Jakarta Sans', sans-serif; color: var(--text); }

        /* Overlay del v√≠deo (Opacidad 0.4 -> 0.6) */
        .video-overlay {
            position: absolute; inset: 0;
            background: linear-gradient(to bottom, rgba(255,255,255,0.4), rgba(255,255,255,0.6));
            z-index: 1;
            transition: background 1.5s ease-in-out;
        }
        .video-overlay.climax-active {
            background: var(--bg) !important;
        }

        /* Liquid Glass (Soporte Parallax) */
        .liquid-glass {
            backdrop-filter: blur(24px) saturate(1.4);
            -webkit-backdrop-filter: blur(24px) saturate(1.4);
            background: radial-gradient(circle at 0% 0%, rgba(255,255,255,0.5) 0%, transparent 50%),
                        linear-gradient(135deg, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.2) 100%);
            border: 1px solid var(--border);
            box-shadow: 0 4px 30px rgba(0,0,0,0.05);
            color: var(--text);
            will-change: transform;
        }

        /* Revelado Arquitect√≥nico (Efecto Texto) */
        .reveal-item { 
            transform: translateY(110%); 
            opacity: 0; 
            will-change: transform, opacity; 
        }

        /* Clases base para Parallax */
        .parallax-bg { will-change: transform; }
        .parallax-text { will-change: transform; }

        /* Transiciones entre slides */
        .slide-wrapper {
            transition: opacity 500ms cubic-bezier(0.4,0,0.2,1), transform 500ms cubic-bezier(0.4,0,0.2,1);
            will-change: opacity, transform;
        }
        .slide-active { opacity:1; transform:scale(1); z-index:10; pointer-events:auto; }
        .slide-prev { opacity:0; transform:scale(0.95); z-index:0; pointer-events:none; }
        .slide-next { opacity:0; transform:scale(1.05); z-index:0; pointer-events:none; }

        .controls-layer { transition:opacity 300ms ease; }
        .controls-hidden { opacity:0; pointer-events:none; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;

        // ---------- iconos SVG ----------
        const IconChevronLeft = ({ size=24 }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m15 18-6-6 6-6"/></svg>;
        const IconChevronRight = ({ size=24 }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m9 18 6-6-6-6"/></svg>;
        const IconMaximize = ({ size=24 }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M8 3H5a2 2 0 0 0-2 2v3M21 8V5a2 2 0 0 0-2-2h-3M3 16v3a2 2 0 0 0 2 2h3M16 21h3a2 2 0 0 0 2-2v-3"/></svg>;
        const IconMinimize = ({ size=24 }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M8 3v3a2 2 0 0 1-2 2H3M21 8h-3a2 2 0 0 1-2-2V3M3 16h3a2 2 0 0 1 2 2v3M16 21v-3a2 2 0 0 1 2-2h3"/></svg>;
        
        const IconPlay = ({ size=24 }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>;
        const IconPause = ({ size=24 }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>;

        const IconCine = ({ className }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M9 8l6 4-6 4V8z"/></svg>;
        const IconDrone = ({ className }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><circle cx="12" cy="12" r="2"/><path d="M12 6V2M12 22v-4M18 12h4M2 12h4M18 6l2-2M6 18l-2 2M18 18l2 2M6 6L4 4"/></svg>;
        const IconFuturo = ({ className }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><rect x="4" y="4" width="16" height="16" rx="2"/><path d="M8 8h8v8H8z"/><circle cx="12" cy="12" r="1" fill="currentColor"/></svg>;
        const IconMente = ({ className }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><path d="M12 2a8 8 0 0 0-8 8c0 3.5 2 6 4 8s2 4 2 4h4s0-2 2-4 4-4.5 4-8a8 8 0 0 0-8-8z"/><circle cx="12" cy="10" r="2" fill="currentColor"/></svg>;
        const IconResultado = ({ className }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5"><path d="M3 3v16a2 2 0 0 0 2 2h16"/><path d="M7 12l3 3 5-5"/></svg>;

        // ---------- logo ----------
        const Logo = () => (
            <div className="flex items-center gap-2">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                    <rect x="2" y="2" width="36" height="36" rx="8" stroke="var(--gold)" strokeWidth="2" fill="none"/>
                    <path d="M12 26V14H18.5C20.433 14 22 15.567 22 17.5C22 18.9865 21.0734 20.2559 19.7422 20.7681L23 26H20.5L17.6429 21H14V26H12ZM14 19H18.5C19.3284 19 20 18.3284 20 17.5C20 16.6716 19.3284 16 18.5 16H14V19Z" fill="var(--text)"/>
                    <path d="M28 17.5C28 16.1193 26.8807 15 25.5 15H24C23.4477 15 23 15.4477 23 16C23 16.5523 23.4477 17 24 17H25.5C26.8807 17 28 18.1193 28 19.5C28 20.8807 26.8807 22 25.5 22H23C21.6193 22 20.5 20.8807 20.5 19.5H22.5C22.5 20.0523 22.9477 20.5 23.5 20.5H25.5C26.0523 20.5 26.5 20.0523 26.5 19.5C26.5 18.9477 26.0523 18.5 25.5 18.5H24C22.6193 18.5 21.5 17.3807 21.5 16C21.5 14.6193 22.6193 13.5 24 13.5H25.5C26.8807 13.5 28 14.6193 28 16H26Z" fill="var(--gold)"/>
                </svg>
                <span className="font-bold tracking-widest text-[clamp(1rem,1.2vw,1.25rem)] uppercase text-text">Rubik Sota</span>
            </div>
        );

        // ---------- UI Reutilizable ----------
        const Header = ({ pageNum }) => (
            <header className="flex justify-between items-center w-full">
                <Logo />
                <div className="text-[clamp(12px,1.05vw,20px)] tracking-widest uppercase font-medium text-text">Pitch Deck</div>
                {pageNum && (
                    <div className="bg-gold-soft text-text font-semibold px-3 py-1 rounded-sm text-[clamp(11px,1vw,16px)]">
                        P√°gina {pageNum}
                    </div>
                )}
            </header>
        );

        const Footer = ({ text }) => (
            <footer className="text-right text-muted font-medium tracking-wide text-[clamp(12px,1.05vw,20px)]">
                {text}
            </footer>
        );

        // ---------- video HLS ----------
        const VideoBackground = ({ src, isPlaying, isClimax }) => {
            const videoRef = useRef(null);
            
            useEffect(() => {
                const video = videoRef.current;
                if (!video) return;
                let hls;
                if (Hls.isSupported()) {
                    hls = new Hls({ enableWorker: true });
                    hls.loadSource(src);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.MANIFEST_PARSED, () => {
                        if (isPlaying) video.play().catch(()=>{});
                    });
                } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                    video.src = src;
                    video.addEventListener('loadedmetadata', () => {
                        if (isPlaying) video.play().catch(()=>{});
                    });
                }
                return () => hls?.destroy();
            }, [src]);

            useEffect(() => {
                const video = videoRef.current;
                if (!video) return;
                if (isPlaying) video.play().catch(()=>{});
                else video.pause();
            }, [isPlaying]);

            return (
                <div className="absolute inset-0 w-full h-full scale-[1.05] parallax-bg z-0 pointer-events-none">
                    <video ref={videoRef} className="absolute inset-0 w-full h-full object-cover" loop muted playsInline />
                    <div className={`video-overlay ${isClimax ? 'climax-active' : ''}`}></div>
                </div>
            );
        };

        // ---------- GSAP Global Logic para Text Reveal ----------
        const useArchitecturalReveal = (isActive, ref) => {
            useEffect(() => {
                if (!isActive) return;
                const ctx = gsap.context(() => {
                    // Animaci√≥n power4.out emula el "peso" del hormig√≥n levant√°ndose
                    gsap.to(".reveal-item", { 
                        y: "0%", 
                        opacity: 1, 
                        duration: 1.2, 
                        stagger: 0.1, 
                        ease: "power4.out" 
                    });
                }, ref);
                return () => ctx.revert();
            }, [isActive]);
        };


        // ---------- SLIDES ----------
        const Slide1 = ({ isActive }) => {
            const ref = useRef();
            useArchitecturalReveal(isActive, ref);

            return (
                <div ref={ref} className="relative w-full h-full">
                    <div className="relative z-10 flex flex-col justify-between h-full p-[5%] pointer-events-none">
                        <Header />
                        {/* La clase parallax-text mover√° todo el bloque en conjunto */}
                        <main className="flex flex-col items-center justify-center text-center flex-1 max-w-4xl mx-auto parallax-text pointer-events-auto">
                            <div className="overflow-hidden mb-6"><h1 className="reveal-item text-[clamp(2.5rem,5vw,4rem)] font-bold text-text">El hogar en calma</h1></div>
                            <div className="overflow-hidden mb-4"><p className="reveal-item text-[clamp(1.2rem,2vw,1.8rem)] font-light max-w-2xl text-text">Hay momentos en los que todo est√° en equilibrio. Tu proyecto es s√≥lido. Tu talento es real.</p></div>
                            <div className="overflow-hidden mb-6"><p className="reveal-item text-[clamp(1.2rem,2vw,1.8rem)] font-light max-w-2xl text-text">Has hecho lo dif√≠cil: crear algo honesto. Pero ah√≠ fuera‚Ä¶ el mercado no es un jard√≠n. Est√° lleno de ruido. De mensajes id√©nticos. De promesas vac√≠as.</p></div>
                            
                            <div className="overflow-hidden my-4">
                                <div className="reveal-item border-l-4 border-gold pl-6 py-2 text-left max-w-2xl">
                                    <p className="text-[clamp(1.2rem,2vw,1.8rem)] font-semibold text-text">Y cuando todo parece igual, el precio se convierte en el √∫nico argumento.</p>
                                </div>
                            </div>
                            
                            <div className="overflow-hidden mt-6"><p className="reveal-item text-[clamp(1.2rem,2vw,1.8rem)] font-medium text-muted">Ah√≠ empieza el drama.</p></div>
                        </main>
                        <Footer text="El hogar en calma" />
                    </div>
                </div>
            );
        };

        const Slide2 = ({ isActive }) => {
            const ref = useRef();
            useArchitecturalReveal(isActive, ref);

            return (
                <div ref={ref} className="relative w-full h-full">
                    <div className="relative z-10 flex flex-col justify-between h-full p-[5%] pointer-events-none">
                        <Header pageNum="001" />
                        <main className="flex flex-col justify-center max-w-3xl mx-auto flex-1 parallax-text pointer-events-auto">
                            <div className="overflow-hidden mb-6"><h2 className="reveal-item text-[clamp(2rem,3.5vw,3rem)] font-bold text-text">Cuando aparece la competencia</h2></div>
                            <div className="overflow-hidden mb-4"><p className="reveal-item text-[clamp(1.1rem,1.8vw,1.5rem)] text-text">El mercado es una selva injusta. No siempre son m√°s fuertes. Pero hacen m√°s ruido, destruyen y desatan caos.</p></div>
                            <div className="overflow-hidden mb-8"><p className="reveal-item text-[clamp(1.1rem,1.8vw,1.5rem)] text-text">Publican m√°s. Gritan m√°s. Prometen m√°s. Y de repente, tu negocio ‚Äîs√≥lido, bien hecho, honesto‚Äî queda oculto entre el ruido.</p></div>
                            
                            <div className="overflow-hidden">
                                <div className="reveal-item relative p-6 liquid-glass parallax-glass rounded-xl border-t-4 border-gold">
                                    <p className="text-[clamp(1.3rem,2vw,1.8rem)] font-bold text-text mb-2">No pierdes por calidad. Pierdes por percepci√≥n.</p>
                                    <p className="text-[clamp(1.1rem,1.8vw,1.5rem)] font-medium text-text">Porque el mercado no premia al mejor. Premia al que se percibe primero.</p>
                                </div>
                            </div>
                        </main>
                        <Footer text="Cuando aparece la competencia" />
                    </div>
                </div>
            );
        };

        const Slide3 = ({ isActive }) => {
            const ref = useRef();
            useArchitecturalReveal(isActive, ref);

            return (
                <div ref={ref} className="relative w-full h-full">
                    <div className="relative z-10 flex flex-col justify-between h-full p-[5%] pointer-events-none">
                        <Header pageNum="002" />
                        <main className="flex flex-col justify-center max-w-3xl mx-auto flex-1 parallax-text pointer-events-auto">
                            <div className="overflow-hidden mb-6"><h2 className="reveal-item text-[clamp(2rem,3.5vw,3rem)] font-bold text-text">El despertar</h2></div>
                            <div className="overflow-hidden mb-4"><p className="reveal-item text-[clamp(1.1rem,1.8vw,1.5rem)] text-text">Entonces ocurre algo. Entiendes que no basta con mostrar metros. Ni renders fr√≠os. Ni visitas improvisadas.</p></div>
                            <div className="overflow-hidden mb-8"><p className="reveal-item text-[clamp(1.1rem,1.8vw,1.5rem)] text-text">Descubres la verdad: Una vivienda no se compra con los ojos. Se firma con el coraz√≥n. Se vende cuando alguien se imagina viviendo dentro.</p></div>
                            
                            <div className="overflow-hidden self-start">
                                <p className="reveal-item text-[clamp(1.3rem,2vw,1.8rem)] font-bold text-text bg-gold-soft py-2 px-4 rounded-md inline-block">
                                    Ah√≠ aparece la estrategia. Ahora aparecemos nosotros.
                                </p>
                            </div>
                        </main>
                        <Footer text="El despertar" />
                    </div>
                </div>
            );
        };

        const Slide4 = ({ isActive }) => {
            const ref = useRef();
            useArchitecturalReveal(isActive, ref);
            
            const items = [
                { icon: IconCine, title: "Cine", desc: "V√≠deo 4K y direcci√≥n art√≠stica" },
                { icon: IconDrone, title: "Vuelo", desc: "Drones que revelan contexto" },
                { icon: IconFuturo, title: "Futuro", desc: "3D, IA y recorridos virtuales" },
                { icon: IconMente, title: "Mente", desc: "Posicionamiento de marca" },
                { icon: IconResultado, title: "Resultado", desc: "Captaci√≥n inteligente" },
            ];
            
            return (
                <div ref={ref} className="relative w-full h-full">
                    <div className="relative z-10 flex flex-col justify-between h-full p-[5%] pointer-events-none">
                        <Header pageNum="003" />
                        <main className="flex flex-col justify-center flex-1 max-w-6xl mx-auto parallax-text pointer-events-auto">
                            <div className="overflow-hidden mb-6"><h2 className="reveal-item text-center text-[clamp(2rem,4vw,3rem)] font-bold text-text">Nuestra forma de contar</h2></div>
                            <div className="overflow-hidden mb-10"><p className="reveal-item text-center text-[clamp(1.1rem,1.8vw,1.5rem)] font-medium text-muted max-w-3xl mx-auto">Transformamos ladrillos en emociones usando el lenguaje que el mercado entiende:</p></div>
                            
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                {items.slice(0,3).map((item, i) => (
                                    <div key={i} className="overflow-hidden rounded-2xl">
                                        <div className="reveal-item liquid-glass parallax-glass p-6 h-full flex flex-col items-center text-center relative group">
                                            <div className="absolute top-0 left-0 w-full h-1 bg-gold transform origin-left scale-x-0 transition-transform duration-300 group-hover:scale-x-100"></div>
                                            <item.icon className="w-12 h-12 mb-4 text-text" />
                                            <h3 className="text-xl font-bold mb-2 text-text">{item.title}</h3>
                                            <p className="text-muted font-medium">{item.desc}</p>
                                        </div>
                                    </div>
                                ))}
                            </div>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6 max-w-4xl mx-auto w-full">
                                {items.slice(3).map((item, i) => (
                                    <div key={i} className="overflow-hidden rounded-2xl">
                                        <div className="reveal-item liquid-glass parallax-glass p-6 h-full flex items-center gap-4 relative group">
                                            <div className="absolute left-0 top-0 h-full w-1 bg-gold transform origin-bottom scale-y-0 transition-transform duration-300 group-hover:scale-y-100"></div>
                                            <item.icon className="w-10 h-10 shrink-0 text-text" />
                                            <div>
                                                <h3 className="text-xl font-bold text-text">{item.title}</h3>
                                                <p className="text-muted font-medium">{item.desc}</p>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </main>
                        <Footer text="Nuestra forma de contar" />
                    </div>
                </div>
            );
        };

        const Slide5 = ({ isActive }) => {
            const ref = useRef();
            useArchitecturalReveal(isActive, ref);

            return (
                <div ref={ref} className="relative w-full h-full">
                    <div className="relative z-10 flex flex-col justify-between h-full p-[5%] pointer-events-none">
                        <Header pageNum="004" />
                        <main className="flex flex-col items-center justify-center text-center flex-1 parallax-text pointer-events-auto">
                            <div className="overflow-hidden mb-8"><h2 className="reveal-item text-[clamp(2rem,4vw,3rem)] font-bold text-text">La obra maestra</h2></div>
                            <div className="overflow-hidden mb-6"><p className="reveal-item text-[clamp(1.2rem,2vw,1.8rem)] max-w-3xl text-text font-medium">Transformamos promociones y estudios en activos comerciales. No entregamos piezas sueltas. Dise√±amos un sistema completo:</p></div>
                            
                            <div className="flex flex-col items-center gap-3 mb-12">
                                <div className="overflow-hidden"><div className="reveal-item flex items-center gap-3"><div className="w-2 h-2 rounded-full bg-gold"></div><p className="text-[clamp(1.2rem,2vw,1.6rem)] text-text">V√≠deos cinematogr√°ficos.</p></div></div>
                                <div className="overflow-hidden"><div className="reveal-item flex items-center gap-3"><div className="w-2 h-2 rounded-full bg-gold"></div><p className="text-[clamp(1.2rem,2vw,1.6rem)] text-text">Webs que convencen.</p></div></div>
                                <div className="overflow-hidden"><div className="reveal-item flex items-center gap-3"><div className="w-2 h-2 rounded-full bg-gold"></div><p className="text-[clamp(1.2rem,2vw,1.6rem)] text-text">Funnels que captan.</p></div></div>
                            </div>
                            
                            <div className="overflow-hidden inline-block">
                                <div className="reveal-item border-b-4 border-gold pb-2">
                                    <h3 className="text-[clamp(1.5rem,2.5vw,2.2rem)] font-bold text-text uppercase tracking-wide">¬øPreparado para ganar la batalla?</h3>
                                </div>
                            </div>
                        </main>
                        <Footer text="La obra maestra" />
                    </div>
                </div>
            );
        };

        const Slide6 = ({ isActive }) => {
            const ref = useRef();
            useArchitecturalReveal(isActive, ref);

            return (
                <div ref={ref} className="relative w-full h-full">
                    <div className="relative z-10 flex flex-col justify-between h-full p-[5%] pointer-events-none">
                        <Header pageNum="005" />
                        <main className="flex flex-col justify-center max-w-3xl mx-auto flex-1 parallax-text pointer-events-auto">
                            <div className="overflow-hidden mb-6"><h2 className="reveal-item text-[clamp(2rem,3.5vw,3rem)] font-bold text-text">Cuando todo cambia</h2></div>
                            <div className="overflow-hidden mb-6"><p className="reveal-item text-[clamp(1.1rem,1.8vw,1.5rem)] text-text">Porque cuando alguien vea tu v√≠deo, no estar√° mirando una casa. Estar√° viviendo en ella.</p></div>
                            
                            <div className="space-y-4 pl-4 border-l-2 border-border mb-8">
                                <div className="overflow-hidden"><p className="reveal-item text-[clamp(1.1rem,1.8vw,1.4rem)] text-text"><span className="text-gold font-bold mr-2">‚úì</span> Adi√≥s a visitas curiosas: s√≥lo vienen los que compran.</p></div>
                                <div className="overflow-hidden"><p className="reveal-item text-[clamp(1.1rem,1.8vw,1.4rem)] text-text"><span className="text-gold font-bold mr-2">‚úì</span> Adi√≥s a regateos: el valor se entiende antes del precio.</p></div>
                                <div className="overflow-hidden"><p className="reveal-item text-[clamp(1.1rem,1.8vw,1.4rem)] text-text"><span className="text-gold font-bold mr-2">‚úì</span> Adi√≥s al ruido: tu marca brilla con luz propia.</p></div>
                            </div>
                            
                            <div className="overflow-hidden inline-block">
                                <p className="reveal-item text-[clamp(1.2rem,2vw,1.6rem)] font-bold text-text bg-gold-soft py-3 px-5 rounded">
                                    Nuestro trabajo no es un gasto. Es un filtro y ventaja competitiva.
                                </p>
                            </div>
                        </main>
                        <Footer text="Cuando todo cambia" />
                    </div>
                </div>
            );
        };

        const Slide7 = ({ isActive, onClimax }) => {
            const ref = useRef();
            useArchitecturalReveal(isActive, ref);

            return (
                <div ref={ref} className="relative w-full h-full">
                    <div className="relative z-10 flex flex-col justify-between h-full p-[5%] pointer-events-none">
                        <Header pageNum="006" />
                        <main className="flex flex-col items-center justify-center text-center flex-1 max-w-4xl mx-auto parallax-text pointer-events-auto">
                            <div className="overflow-hidden mb-2">
                                <h1 onClick={onClimax} className="reveal-item text-[clamp(2.5rem,5vw,4rem)] font-extrabold tracking-widest uppercase text-text cursor-pointer hover:scale-[1.02] transition-transform duration-300">
                                    Rubik Sota
                                </h1>
                            </div>
                            <div className="overflow-hidden mb-8"><p className="reveal-item text-[clamp(1.4rem,2.2vw,2rem)] font-medium text-muted">No vender√°s metros cuadrados, sino la emoci√≥n de habitarlos.</p></div>
                            
                            <div className="overflow-hidden mb-2"><p className="reveal-item text-[clamp(1.1rem,1.8vw,1.5rem)] text-text max-w-2xl">Convertimos proyectos en deseo. Deseo en decisi√≥n. Y decisi√≥n, en tu negocio.</p></div>
                            <div className="overflow-hidden mb-10"><p className="reveal-item text-[clamp(1.1rem,1.8vw,1.5rem)] font-semibold text-text">Si tu obra merece un final a su altura, hablemos.</p></div>
                            
                            <div className="overflow-hidden">
                                <div className="reveal-item liquid-glass parallax-glass p-8 rounded-2xl border-t-4 border-gold">
                                    <p className="text-[clamp(1.5rem,2.5vw,2rem)] font-bold text-text mb-1">Rubik Sota</p>
                                    <p className="text-[clamp(1.1rem,1.8vw,1.4rem)] text-muted mb-4 uppercase tracking-widest text-sm">Agencia Creativa</p>
                                    <p className="text-[clamp(1.5rem,2.5vw,2rem)] font-bold text-text">üìû 629 554 870</p>
                                </div>
                            </div>
                        </main>
                        <Footer text="Arquitectura en Movimiento" />
                    </div>
                </div>
            );
        };

        // ---------- componente principal ----------
        const Presentation = () => {
            const [currentSlide, setCurrentSlide] = useState(0);
            const [controlsVisible, setControlsVisible] = useState(true);
            const [isFullscreen, setIsFullscreen] = useState(false);
            
            // Estado global del video
            const [isPlaying, setIsPlaying] = useState(true);
            const [isClimax, setIsClimax] = useState(false);
            
            const totalSlides = 7;

            // Funci√≥n del climax (Slide 7)
            const handleClimax = useCallback(() => {
                setIsPlaying(false);
                setIsClimax(true);
            }, []);

            const next = useCallback(() => setCurrentSlide(p => Math.min(p+1, totalSlides-1)), []);
            const prev = useCallback(() => setCurrentSlide(p => Math.max(p-1, 0)), []);
            const toggleFS = useCallback(() => {
                if (!document.fullscreenElement) document.documentElement.requestFullscreen();
                else document.exitFullscreen();
            }, []);

            // Desactivar climax si cambiamos de slide
            useEffect(() => {
                if (currentSlide !== 6) setIsClimax(false);
            }, [currentSlide]);

            useEffect(() => {
                const handleKey = (e) => {
                    if (e.key === 'ArrowRight' || e.key === ' ') next();
                    else if (e.key === 'ArrowLeft') prev();
                    else if (e.key.toLowerCase() === 'f') toggleFS();
                };
                window.addEventListener('keydown', handleKey);
                return () => window.removeEventListener('keydown', handleKey);
            }, [next, prev, toggleFS]);

            useEffect(() => {
                const handleFS = () => setIsFullscreen(!!document.fullscreenElement);
                document.addEventListener('fullscreenchange', handleFS);
                return () => document.removeEventListener('fullscreenchange', handleFS);
            }, []);

            // Control de Parallax Global + Visibilidad de Controles
            useEffect(() => {
                let timeout;
                
                // GSAP quickTo es la forma de alto rendimiento para mover capas en rat√≥n
                const moveBgX = gsap.quickTo(".parallax-bg", "x", { duration: 0.8, ease: "power2.out" });
                const moveBgY = gsap.quickTo(".parallax-bg", "y", { duration: 0.8, ease: "power2.out" });
                
                const moveGlassX = gsap.quickTo(".parallax-glass", "x", { duration: 0.8, ease: "power2.out" });
                const moveGlassY = gsap.quickTo(".parallax-glass", "y", { duration: 0.8, ease: "power2.out" });
                
                const moveTextX = gsap.quickTo(".parallax-text", "x", { duration: 0.8, ease: "power2.out" });
                const moveTextY = gsap.quickTo(".parallax-text", "y", { duration: 0.8, ease: "power2.out" });

                const handleMouse = (e) => {
                    // Visibilidad de UI
                    setControlsVisible(true);
                    clearTimeout(timeout);
                    timeout = setTimeout(() => setControlsVisible(false), 3000);

                    // Parallax: Normalizamos coordenadas (-1 a 1)
                    const x = (e.clientX / window.innerWidth - 0.5) * 2;
                    const y = (e.clientY / window.innerHeight - 0.5) * 2;

                    // M√∫ltiples velocidades para enga√±ar la profundidad
                    moveBgX(x * -15);    // El fondo se mueve al rev√©s (y poco)
                    moveBgY(y * -15);
                    
                    moveGlassX(x * 10);  // El panel medio acompa√±a al rat√≥n
                    moveGlassY(y * 10);
                    
                    moveTextX(x * 25);   // El texto vuela muy por encima (m√°s distancia)
                    moveTextY(y * 25);
                };

                window.addEventListener('mousemove', handleMouse);
                // Inicializamos al centro para evitar saltos
                handleMouse({ clientX: window.innerWidth / 2, clientY: window.innerHeight / 2 });
                
                return () => {
                    window.removeEventListener('mousemove', handleMouse);
                    clearTimeout(timeout);
                };
            }, []);

            const slides = [Slide1, Slide2, Slide3, Slide4, Slide5, Slide6, Slide7];
            const videoSrc = "https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8";

            return (
                <div className="relative w-screen h-screen overflow-hidden bg-bg text-text">
                    <VideoBackground src={videoSrc} isPlaying={isPlaying} isClimax={isClimax} />
                    
                    {slides.map((Comp, i) => {
                        let cls = "slide-wrapper absolute inset-0 w-full h-full ";
                        if (i === currentSlide) cls += "slide-active";
                        else if (i < currentSlide) cls += "slide-prev";
                        else cls += "slide-next";
                        return <div key={i} className={cls}><Comp isActive={i===currentSlide} onClimax={handleClimax} /></div>;
                    })}
                    
                    <div className={`controls-layer absolute top-[3%] right-[3%] text-[11px] tracking-wider font-medium text-muted z-50 pointer-events-none ${controlsVisible ? '' : 'controls-hidden'}`}>
                        ‚Üê ‚Üí Navegar ¬∑ F Pantalla completa
                    </div>
                    
                    <div className={`controls-layer absolute bottom-[3%] left-[3%] right-[3%] h-[60px] liquid-glass rounded-full flex items-center justify-between px-[2%] z-50 ${controlsVisible ? '' : 'controls-hidden'}`}>
                        <div className="text-[14px] font-mono font-bold w-[100px] text-text">
                            {String(currentSlide+1).padStart(2,'0')} / {String(totalSlides).padStart(2,'0')}
                        </div>
                        <div className="flex gap-2">
                            {Array.from({length: totalSlides}).map((_, idx) => (
                                <button key={idx} onClick={() => setCurrentSlide(idx)} className={`h-[6px] rounded-full transition-all duration-300 ${idx===currentSlide ? 'w-[24px] bg-gold' : 'w-[6px] bg-muted hover:bg-text'}`} />
                            ))}
                        </div>
                        <div className="flex gap-2 text-text items-center">
                            <button onClick={prev} disabled={currentSlide===0} className="p-2 rounded-full hover:bg-gold-soft disabled:opacity-30 transition-colors"><IconChevronLeft size={20} /></button>
                            <button onClick={next} disabled={currentSlide===totalSlides-1} className="p-2 rounded-full hover:bg-gold-soft disabled:opacity-30 transition-colors"><IconChevronRight size={20} /></button>
                            <div className="w-[1px] h-5 bg-border mx-2"></div>
                            
                            <button onClick={() => setIsPlaying(!isPlaying)} className="p-2 rounded-full hover:bg-gold-soft transition-colors" title={isPlaying ? "Pausar v√≠deo" : "Reproducir v√≠deo"}>
                                {isPlaying ? <IconPause size={18} /> : <IconPlay size={18} />}
                            </button>
                            <button onClick={toggleFS} className="p-2 rounded-full hover:bg-gold-soft transition-colors" title="Pantalla Completa">
                                {isFullscreen ? <IconMinimize size={18} /> : <IconMaximize size={18} />}
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<Presentation />);
    </script>
</body>
</html>